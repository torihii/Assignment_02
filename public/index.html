<!DOCTYPE html>
<html>
    <head>
        <title>Breakfast Time!</title>
        <meta name="description" content="Hello, WebVR! - A-Frame">
        <script src="/js/aframe.min.js"></script> <!-- https://github.com/aframevr/aframe -->
        <script src="/js/spherical-env-map.js"></script> <!-- https://github.com/aframevr/aframe -->

       

    </head>
    <body>
        <!-- https://aframe.io/docs/0.7.0/components/gltf-model.html#sidebar -->
        <a-scene shadow="type:basic;">
                <a-assets timeout="3000">
                    <img id="skymap" src="/assets/textures/wall.jpg">
                    <img id="platemap" src="/assets/textures/plate.mtl">
                    
                    <a-asset-item id="plate-obj" src="/assets/models/plate.obj">
                </a-assets>
            
                <a-entity light="type:directional; castShadow:true; intensity:0.6; shadowBias:-0.000001; shadowMapWidth:1024; shadowMapHeight:1024;" position="-0.5 1 1"></a-entity>
                <a-entity light="type: ambient; intensity: 1.0; color:#bbb;"></a-entity>
            
                
                <a-entity obj-model="obj:#plate-obj;" position="0 .5 0" scale=".06 .06 .06" material="color:#fff; src:#platemap; sphericalEnvMap:#skymap; roughness:0.5; metalness:0.2;" shadow="cast:true; receive:true;"></a-entity>
                    
                <a-entity id="plane" geometry="primitive:plane; width:8; height:8;" position="0 0 0" rotation="-90 0 0" 
                    shadow="receive:true;" material="color:#845117; sphericalEnvMap:#skymap; roughness:0.5; metalness:0.0;"></a-entity>
            
                <a-entity id="sky"
                    geometry="primitive:sphere; radius:500;"
                    material="shader:flat; src:#skymap; side:back; height:2048; width:2048"
            ></a-entity>
            </a-scene>

            <script src="/socket.io/socket.io.js"></script>
            <script>
                let socket = io();
    
                //default connect event
                socket.on('connect', function() {
                    console.log("connected!");
                });

                document.querySelector('#plate-obj').addEventListener('click', function() {
                    socket.emit('red');

                 });

            </script>
    </body>
</html>
